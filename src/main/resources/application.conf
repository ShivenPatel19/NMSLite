# Logging Configuration
logging {
  enabled = true                               # Enable/disable application logging
  level = "INFO"                               # Log level: TRACE, DEBUG, INFO, WARN, ERROR, OFF
  file.path = "logs/nmslite.log"               # Log file path
  file.enabled = true                          # Enable/disable file logging
  console.enabled = true                       # Enable/disable console logging

  # File rolling configuration
  file.max.history = 30                        # Keep logs for 30 days
  file.max.size = "1GB"                        # Maximum total log size
}

# Database Configuration
database {
  host = "localhost"
  port = 5432
  database = "nmslite"
  user = "nmslite"
  password = "nmslite"
  maxSize = 20
  blocking.timeout.seconds = 60
}

# HTTP Server Configuration
main {
  http.port = 8080
}

# Worker Pool Configuration
worker {
  pool.size = 10
  max.execute.time = 600000     # 10 minutes (in milliseconds)
}

# Shared Tools Configuration
tools {
  goengine.path = "./goengine/goengine"
  fping.path = "fping"
  fping.timeout.seconds = 5                  # fping command timeout
  fping.blocking.timeout.seconds = 15        # Vert.x blocking timeout for fping
  port.check.timeout.seconds = 5             # Port connectivity check timeout
  port.check.blocking.timeout.seconds = 10   # Vert.x blocking timeout for port check
}

# GoEngine Global Configuration
goengine {
  # Global GoEngine settings (Java backend priority, GoEngine YAML fallback)
  max.workers = 30                           # Maximum concurrent device/IP processing
  logging.enabled = true                     # Enable GoEngine application logging
  timing.enabled = true                      # Enable timestamp and duration calculation

  # Working directory and configuration paths
  working.directory = "./goengine"           # GoEngine working directory
  config.file = "config/goengine.yaml"       # GoEngine YAML configuration file path
}

# Discovery Configuration
discovery {
  batch.size = 100                          # Max IPs per GoEngine discovery request
  blocking.timeout.goengine = 120           # Vert.x blocking timeout for GoEngine discovery

  # GoEngine Discovery Parameters (Java backend priority, GoEngine YAML fallback)
  goengine {
    timeout.seconds = 30                     # Overall timeout per IP during discovery
    connection.timeout.seconds = 10          # Timeout per credential attempt
    retry.count = 2                          # Number of retries per credential
    process.timeout.seconds = 90             # GoEngine process timeout
  }
}

# Polling Configuration
polling {
  enabled = true                           # Enable/disable PollingMetricsVerticle deployment

  # Polling Cycle Configuration
  cycle.interval.seconds = 60              # How often scheduler wakes up to check for due devices (1 min)
  batch.size = 50                          # Max devices per batch within a cycle
  max.cycles.skipped = 5                   # Auto-disable device after N consecutive cycle failures
  failure.log.path = "polling_failed/metrics_polling_failed.txt"  # Failure log file path

  # Legacy (kept for backward compatibility)
  system.cycle.interval.seconds = 60       # Deprecated: use cycle.interval.seconds instead
  blocking.timeout.goengine = 330          # Vert.x blocking timeout for GoEngine

  # GoEngine Polling Parameters
  goengine {
    process.timeout.seconds = 300          # GoEngine process timeout for metrics
  }
}

# Device Default Configuration
device {
  defaults {
    # Default alert thresholds (percentage)
    alert.threshold.cpu = 80.0
    alert.threshold.memory = 85.0
    alert.threshold.disk = 90.0

    # Default monitoring configuration
    polling.interval.seconds = 600          # Default interval for polling individual devices (10 min)
    timeout.seconds = 60                    # Overall timeout per device during metrics collection
    retry.count = 2                         # Number of retries per device
    connection.timeout.seconds = 15         # Timeout per device connection attempt
  }
}
