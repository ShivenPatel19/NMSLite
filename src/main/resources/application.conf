# Logging Configuration
logging {
  enabled = true                               # Enable/disable application logging
  level = "INFO"                               # Log level: TRACE, DEBUG, INFO, WARN, ERROR
  file.path = "logs/nmslite.log"               # Log file path
  file.enabled = true                          # Enable/disable file logging
  console.enabled = true                       # Enable/disable console logging
}

# Database Configuration
database {
  host = "localhost"
  port = 5432
  database = "nmslite"
  user = "nmslite"
  password = "nmslite"
  maxSize = 20
  blocking.timeout.seconds = 60
}

# HTTP Server Configuration
server {
  http.port = 8080
}

# Worker Pool Configuration
worker {
  pool.size = 10
}

# Shared Tools Configuration
tools {
  goengine.path = "./goengine/goengine"

  # fping Configuration - 2 Level Timeout Hierarchy
  fping {
    path = "fping"
    timeout.seconds = 5                      # Level 2: Per-IP timeout (fping -t parameter)
    batch.blocking.timeout.seconds = 180     # Level 1: Batch operation timeout (Vert.x executeBlocking)
  }

  # Port Check Configuration - 2 Level Timeout Hierarchy
  port.check {
    timeout.seconds = 5                      # Level 2: Per-socket timeout (TCP connection timeout)
    batch.blocking.timeout.seconds = 10      # Level 1: Batch operation timeout (Vert.x executeBlocking)
  }
}

# GoEngine Global Configuration
goengine {
  # Global GoEngine settings (Java backend priority, GoEngine YAML fallback)
  max.workers = 30                           # Maximum concurrent device/IP processing
  logging.enabled = true                     # Enable GoEngine application logging
  timing.enabled = true                      # Enable timestamp and duration calculation

  # Working directory and configuration paths
  working.directory = "./goengine"           # GoEngine working directory
  config.file = "config/goengine.yaml"       # GoEngine YAML configuration file path
}

# Discovery Configuration
discovery {
  batch.size = 100                          # Max IPs per GoEngine discovery request
  blocking.timeout.goengine = 120           # Vert.x blocking timeout for GoEngine discovery (Level 1: Batch)

  # GoEngine Discovery Parameters (Java backend priority, GoEngine YAML fallback)
  goengine {
    timeout.seconds = 30                     # Overall timeout per IP during discovery (Level 2: Per-Device)
    connection.timeout.seconds = 10          # Timeout per credential attempt (Level 3: Per-Credential)
    retry.count = 2                          # Number of retries (handled by Java, not passed to GoEngine)
  }
}

# Polling Configuration
polling {
  # Polling Cycle Configuration
  cycle.interval.seconds = 60              # How often scheduler wakes up to check for due devices (1 min)
  batch.size = 50                          # Max devices per batch within a cycle
  max.cycles.skipped = 5                   # Auto-disable device after N consecutive cycle failures
  failure.log.path = "polling_failed/metrics_polling_failed.txt"  # Failure log file path

  blocking.timeout.goengine = 330          # Vert.x blocking timeout for GoEngine (Level 1: Batch)
}

# Device Default Configuration
device {
  defaults {
    # Default alert thresholds (percentage)
    alert.threshold.cpu = 80.0
    alert.threshold.memory = 85.0
    alert.threshold.disk = 90.0

    # Default monitoring configuration
    polling.interval.seconds = 300          # Default interval for polling individual devices (5 min)
    timeout.seconds = 60                    # Default timeout per device during metrics collection
    connection.timeout.seconds = 10         # Timeout per connection attempt during metrics collection
    retry.count = 2                         # Number of retries (handled by Java, not passed to GoEngine)
  }
}
